{"version":3,"sources":["./src/environments/environment.ts","./src/app/interceptors/auth.interceptor.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/interceptors/aut.guard.ts","./src/app/services/auth.service.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpEvent,\r\n  HttpHandler,\r\n  HttpInterceptor,\r\n  HttpRequest,\r\n  HttpErrorResponse,\r\n} from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class AuthInterceptor implements HttpInterceptor {\r\n  intercept(\r\n    req: HttpRequest<any>,\r\n    next: HttpHandler\r\n  ): Observable<HttpEvent<any>> {\r\n    const token = localStorage.getItem('JWT_TOKEN');\r\n\r\n    if (!token) {\r\n      return next.handle(req);\r\n    }\r\n\r\n    const req1 = req.clone({\r\n      headers: req.headers.set('Authorization', `Bearer ${token}`),\r\n    });\r\n\r\n    return next.handle(req1).pipe(\r\n      catchError((err) => {\r\n        if (err instanceof HttpErrorResponse) {\r\n          if (err.status === 401) {\r\n            localStorage.clear();\r\n            window.location.href = '/login';\r\n          }\r\n        }\r\n\r\n        return throwError(err);\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'estudy-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent {}\n","<router-outlet></router-outlet>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { AuthInterceptor } from './interceptors/auth.interceptor';\nimport { MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/dialog';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { AuthGuard } from './interceptors/aut.guard';\n\nimport { AppComponent } from './app.component';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/products', pathMatch: 'full' },\n  {\n    path: 'products',\n    loadChildren: () =>\n      import('./products-page/products-page.module').then(\n        (m) => m.ProductsPageModule\n      ),\n  },\n  {\n    path: 'profile',\n    canActivate: [AuthGuard],\n    loadChildren: () =>\n      import('./profile-page/profile-page.module').then(\n        (m) => m.ProfilePageModule\n      ),\n  },\n  {\n    path: 'login',\n    loadChildren: () =>\n      import('./login-page/login-page.module').then((m) => m.LoginPageModule),\n  },\n  {\n    path: 'register',\n    loadChildren: () =>\n      import('./login-page/login-page.module').then((m) => m.LoginPageModule),\n  },\n];\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    RouterModule.forRoot(routes),\n    BrowserModule,\n    BrowserAnimationsModule,\n    HttpClientModule,\n    MatDialogModule,\n  ],\n  providers: [\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true },\n    { provide: MAT_DIALOG_DEFAULT_OPTIONS, useValue: { hasBackdrop: true } },\n    AuthGuard,\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  Router,\r\n  CanActivate,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n} from '@angular/router';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Injectable()\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private router: Router, private authService: AuthService) {}\r\n\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): boolean {\r\n    if (!this.authService.getUser()) {\r\n      this.router.navigate(['login']);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nimport { User } from '../types/user';\r\nimport { Observable } from 'rxjs';\r\n\r\nconst HTTP_OPTIONS = {\r\n  headers: new HttpHeaders({ 'Content-type': 'application/json' }),\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  private readonly JWT_TOKEN = 'JWT_TOKEN';\r\n  private readonly USER_KEY = 'USER';\r\n\r\n  private AUTH_ROUTE = 'https://estudy-api.herokuapp.com/api/auth';\r\n  private loginUrl = `${this.AUTH_ROUTE}/login`;\r\n  private registerUrl = `${this.AUTH_ROUTE}/register`;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  public authenticateUser(user: { email: string; password: string }) {\r\n    return this.http\r\n      .post<User & { token: string }>(this.loginUrl, { ...user }, HTTP_OPTIONS)\r\n      .pipe(\r\n        tap((result) => {\r\n          if (result.token.length > 0) {\r\n            const { token, ...user } = result;\r\n\r\n            this.setToken(token);\r\n            this.setUser(user);\r\n          }\r\n        })\r\n      );\r\n  }\r\n\r\n  public registerUser(user: {\r\n    username: string;\r\n    email: string;\r\n    password: string;\r\n    class?: string;\r\n  }) {\r\n    return this.http\r\n      .post<User & { token: string }>(\r\n        this.registerUrl,\r\n        { ...user },\r\n        HTTP_OPTIONS\r\n      )\r\n      .pipe(\r\n        tap((result) => {\r\n          if (result.token.length > 0) {\r\n            const { token, ...user } = result;\r\n\r\n            this.setToken(token);\r\n            this.setUser(user);\r\n          }\r\n        })\r\n      );\r\n  }\r\n\r\n  public checkPassowrd(password: string): Observable<boolean> {\r\n    return this.http.post<boolean>(`${this.AUTH_ROUTE}/check-password`, {\r\n      password: password,\r\n    });\r\n  }\r\n\r\n  public changePassowrd(password: string): Observable<boolean> {\r\n    return this.http.post<boolean>(`${this.AUTH_ROUTE}/change-password`, {\r\n      newPassword: password,\r\n    });\r\n  }\r\n\r\n  private setToken(token: string) {\r\n    localStorage.setItem(this.JWT_TOKEN, token);\r\n  }\r\n\r\n  public getToken() {\r\n    return localStorage.getItem(this.JWT_TOKEN);\r\n  }\r\n\r\n  public removeToken() {\r\n    localStorage.removeItem(this.JWT_TOKEN);\r\n  }\r\n\r\n  public setUser(user: User) {\r\n    localStorage.setItem(this.USER_KEY, JSON.stringify(user));\r\n  }\r\n\r\n  public getUser() {\r\n    return JSON.parse(localStorage.getItem(this.USER_KEY));\r\n  }\r\n\r\n  public removeUser() {\r\n    localStorage.removeItem(this.USER_KEY);\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}